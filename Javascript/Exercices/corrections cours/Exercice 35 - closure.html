<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8"/>
    <title>JavaScript : Exercice 35</title>
    <script type="text/javascript">
      /*********************************
      ********** PRÉSENTATION **********
      **********************************
        Une fonction peut retourner une fonction. Ainsi :
        var enAttente = function(nombre) {
          return function(message) {
            alert(message + nombre);
          }
        };

        var stock = enAttente(5);
        stock('Le nombre saisi est ');

        La boite de dialogue affiche : Le nombre saisi est 5
        On appel ce mécanisme une fermeture (closure en anglais). Les fermetures utilisent des variables libres; c'est à dire que la fonction contenue dans la fonction se souvient de l'environnement dans lequel elle est définie.

        /*********************************
        ************ EXERCICE ************
        **********************************
        Réalisez le programme (algorithme) suivant :
        En vous inspirant du mécanisme des fermetures, balayez le tableau ci-dessous pour afficher dans une boite de dialogue la phrase :
        « Il est 8 h, je me lève. Il est 13 h, je déjeûne. Il est 23 h, je vais dormir. »
        Utilisez une boucle while avec compteur.
      */
      var mots = [8, 'je me lève', 13, 'je déjeûne', 23, 'je vais dormir'];


      // alert('Il est ' + mots[0] + 'h, ' + mots[1] + '. ' + mots[2] + ', ' + mots[3] + '. ' + mots[4] + ', ' + mots[5] + '.');

      var affichage = function(heure) {
        heure = 'il est ' + heure + 'h, ';

        return function(choucroute) {
          return heure + choucroute + '. ';
        };
      };

      var texteComplet = '';

      var i = 0;
      while (mots[i]) {
        var maFermeture = affichage(mots[i]);

        var phrase = maFermeture(mots[i + 1]);

        texteComplet += phrase;
        // phraseComplete = phraseComplete + maFermeture(mots[i + 1]);
        // i += 2;
        i = i + 2;
        
      }
      alert(texteComplet);

    </script>
  </head>
  <body>
    <h1>Mon nouveau document</h1>
    <p>Premier paragraphe</p>
    <p>Deuxième paragraphe</p>
    <noscript>
      <p>Veuillez activer JavaScript</p>
    </noscript>
  </body>
</html>
