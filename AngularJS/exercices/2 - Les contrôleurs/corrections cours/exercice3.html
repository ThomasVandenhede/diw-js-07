<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>AngularJS : Les Contrôleurs : Exercice 3</title>
    <script>
      // Énoncé
      /* Les directives ng-controller, ng-click, ng-repeat et ng-style*/
      /**************************************************************************************************
        Pour chaque question qui implique l'utilisation d'un contrôleur, vous répondrez 2 fois. Vous utiliserez :
        - La technique qui consiste à enrichir l'objet $scope de nouvelles propriétés ou méthodes et utiliser ces propriétés ou méthode.
        - La technique qui consiste à créer une instance nommée du contrôleur et utiliser les propriétés ou méthodes de cette instance.

        La directive ng-style permet d'appliquer des propriété de style CSS à un élément. Doit contenir une expression qui est un objet contenant des associations : propriété de style / valeur correspondante. La directive ng-style est documentée ici :  https://docs.angularjs.org/api/ng/directive/ngStyle
      **************************************************************************************************/

      /*
        1. Chargez Angular JS dans ce document. Le contexte applicatif d'Angular JS doit englober tout le document. Votre application s'appellera angularjsExercice3. Un tutoriel officiel sur le chargement d'Angular JS est disponible ici : https://docs.angularjs.org/tutorial/step_00
      */

      /*
        2. Créez un contrôleur qui contient une propriété qui contient un tableau qui contient lui-même 3 objets qui décrivent des propriétés de style (largeur, hauteur et couleur de fond). Utilisez la directive ng-repeat pour appliquer ces propriétés de style à 3 div.
      */

      /*
        3. Dans le contrôleur, créez une méthode qui prend en argument l'index d'un élément dans le tableau d'objets et qui modifie (incrémente) la propriété de style de largeur correspondant à l'objet dont l'index est fourni en argument.
      */

      /*
        4. Lorsqu'on utilise la directive ng-repeat, celle-ci expose des propriétés dans le contexte considéré comme $index qui contient l'index de l'élément considéré. Utilisez la directive ng-click pour faire en sorte que lorsqu'on clique sur une de div, on déclenche la méthode qui modifie le style dont l'index est fourni en argument.
      */
    </script>
  </head>
  <body>
    <div ng-controller="monControleurStyles as monCtrlStyles">
      <div
       ng-repeat="chocolatine in monCtrlStyles.mesElements"
       ng-style="chocolatine.styles"
       ng-click="monCtrlStyles.agrandir($index)">
         {{ elm.texte }}
      </div>
    </div>

    <script src="../lib/angular.min.js"></script>
    <script>
      angular.module('monModuleApp', [])
      .controller('monControleurStyles', [function() {
        this.mesElements = [{
          styles: {
          'background-color':'green',
          'width':'200px',
          'height':'200px'
          },
          texte: 'aaaaaaaaaaaa'
        }, {
          styles: {
          'background-color':'orange',
          'width':'200px',
          'height':'200px'
          },
          texte: 'bbbbb'
        }, {
          styles: {
          'background-color':'blue',
          'width':'200px',
          'height':'200px'
          },
          texte: 'ccccc'
        }];

        this.agrandir = function(idx) {
          console.log(idx);
          this.mesElements[idx].styles.width = (parseFloat(this.mesElements[idx].styles.width) + 10) + 'px';
        }

      }]);

      angular.bootstrap(window.document, ['monModuleApp'], {strictDi: true});


      var MonConstructeurTableau = function() {
        this.elements = [{
          styles: {
          'background-color':'green',
          'width':'200px',
          'height':'200px'
          },
          texte: 'aaaaaaaaaaaa'
        }, {
          styles: {
          'background-color':'orange',
          'width':'200px',
          'height':'200px'
          },
          texte: 'bbbbb'
        }, {
          styles: {
          'background-color':'blue',
          'width':'200px',
          'height':'200px'
          },
          texte: 'ccccc'
        }];
      };

      var monObjetTableau = new MonConstructeurTableau();
      console.log(monObjetTableau);

      for (var i = 0; i < monObjetTableau.elements.length; i++ ) {
        var elm = monObjetTableau.elements[i];
        console.log(elm.styles)
      }

    </script>

  </body>
</html>